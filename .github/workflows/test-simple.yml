name: Simple Test

on: [push, pull_request, workflow_dispatch]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: "3.10"
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    
    - name: Check Python syntax
      run: |
        python -m py_compile pi-pages.py
        echo "âœ… Python syntax check passed"
    
    - name: Check JSON files
      run: |
        python -c "import json; json.load(open('config.json')); print('âœ… config.json is valid')"
        python -c "import json; json.load(open('urls.json')); print('âœ… urls.json is valid')"
    
    - name: List files
      run: |
        echo "ğŸ“ Project structure:"
        find . -type f -name "*.py" -o -name "*.json" -o -name "*.yml" | head -20
    
    - name: Test basic functionality
      run: |
        echo "ğŸ§ª Testing basic functionality..."
        python -c "import json; import sys; config = json.load(open('config.json')); print('âœ… Config loading works'); urls_data = json.load(open('urls.json')); print('âœ… URLs loading works'); print('ğŸ‰ All basic tests passed!')"
    
    - name: Success message
      run: |
        echo "ğŸ‰ Simple test workflow completed successfully!"
        echo "This confirms the basic setup is working." 